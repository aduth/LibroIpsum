<!DOCTYPE html>  <html> <head>   <title>LibroIpsum.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               LibroIpsum.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><a href="http://github.com/aduth/LibroIpsum">View on GitHub</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>LibroIpsum is a simple placeholder text generator similar to other <a href="http://en.wikipedia.org/wiki/Lorem_ipsum">lorem ipsum</a> tools.
LibroIpsum differs from traditional lorem ipsum in that it can be used to generate random phrases from any source text, using character distribution analysis to generate new phrases.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Use LibroIpsum from Node.js, RequireJS, or directly in the browser.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Node.js</h2>

<pre><code>npm install libroipsum
</code></pre>

<h2>RequireJS</h2>

<pre><code>define(['path/to/libs/LibroIpsum.js'],
function(LibroIpsum) {
    // ...
});
</code></pre>

<h2>Browser</h2>

<pre><code>&lt;script src="path/to/libs/LibroIpsum.js"&gt;&lt;/script&gt;
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h1>Usage</h1>

<pre><code>new LibroIpsum(sourceText).generate(numberOfWords[, keyLength]);
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <ul>
<li><code>sourceText</code>: String representation of text from which phrases are to be generated</li>
<li><code>numberOfWords</code>: Number of words to be generated</li>
<li><code>keyLength</code>: Length of key (integer), where larger number will create phrase more similar to original text (optional, defaults to 6)</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">do</span> <span class="nf">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>LibroIpsum</h2>

<p>Generates phrases using character distribution of text from a given string</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">class</span> <span class="nx">LibroIpsum</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Ignore opening and closing punctuation because of difficulty to ensure matching pair</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="vi">@ignoredCharacters: </span><span class="p">[</span>
            <span class="s">&#39;&quot;&#39;</span>
            <span class="s">&#39;`&#39;</span>
            <span class="s">&#39;‘&#39;</span><span class="p">,</span> <span class="s">&#39;’&#39;</span>
            <span class="s">&#39;“&#39;</span><span class="p">,</span> <span class="s">&#39;”&#39;</span>
            <span class="s">&#39;[&#39;</span><span class="p">,</span> <span class="s">&#39;]&#39;</span>
            <span class="s">&#39;(&#39;</span><span class="p">,</span> <span class="s">&#39;)&#39;</span>
            <span class="s">&#39;{&#39;</span><span class="p">,</span> <span class="s">&#39;}&#39;</span>
            <span class="s">&#39;«&#39;</span><span class="p">,</span> <span class="s">&#39;»&#39;</span>
            <span class="s">&#39;\r&#39;</span><span class="p">,</span> <span class="s">&#39;\n&#39;</span>
        <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Sentence-ending characters. Used to locate phrase-starting key</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="vi">@sentenceEnders: </span><span class="p">[</span>
            <span class="s">&#39;.&#39;</span>
            <span class="s">&#39;!&#39;</span>
            <span class="s">&#39;?&#39;</span>
        <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Clause-separating characters. Used to cleanly end generated phrase</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="vi">@clauseSeparators: </span><span class="p">[</span>
            <span class="nx">@sentenceEnders</span><span class="p">...</span>
            <span class="s">&#39;,&#39;</span>
            <span class="s">&#39;;&#39;</span>
        <span class="p">]</span>

        <span class="nv">constructor: </span><span class="nf">(@sourceText) -&gt;</span>
            <span class="vi">@frequencyLib = </span><span class="k">new</span> <span class="nx">FrequencyLibrary</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Return randomly generated phrase with <code>numberOfWords</code> words based on character distribution of text, using key length <code>keyLength</code></p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">generate: </span><span class="nf">(numberOfWords, keyLength = 6) -&gt;</span>
            <span class="k">return</span> <span class="s">&#39;&#39;</span> <span class="k">unless</span> <span class="nx">numberOfWords</span> <span class="o">&gt;</span> <span class="mi">0</span>

            <span class="nv">workingKey = </span><span class="nx">@getKey</span><span class="p">(</span><span class="nx">keyLength</span><span class="p">)</span>
            <span class="nv">currentWords = </span><span class="p">(</span><span class="nx">workingKey</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">)</span> <span class="o">or</span> <span class="p">[]).</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="nv">phrase = </span><span class="nx">workingKey</span>

            <span class="k">while</span> <span class="nx">currentWords</span> <span class="o">&lt;=</span> <span class="nx">numberOfWords</span>
                <span class="nv">distributedChar = </span><span class="nx">@getDistributedChar</span><span class="p">(</span><span class="nx">workingKey</span><span class="p">)</span>
                <span class="k">if</span> <span class="nx">distributedChar</span><span class="o">?</span>
                    <span class="nx">workingKey</span> <span class="o">+=</span> <span class="nx">distributedChar</span>
                    <span class="nv">workingKey = </span><span class="nx">workingKey</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="nx">currentWords</span><span class="o">++</span> <span class="k">if</span> <span class="sr">/\s/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">distributedChar</span><span class="p">)</span>
                <span class="k">else</span>
                    <span class="nv">phrase = </span><span class="nx">phrase</span><span class="p">.</span><span class="nx">replace</span> <span class="sr">/\s+$/</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
                    <span class="nv">workingKey = </span><span class="nx">@getKey</span><span class="p">(</span><span class="nx">keyLength</span><span class="p">)</span>
                    <span class="nv">distributedChar = </span><span class="s">&quot; </span><span class="si">#{</span><span class="nx">workingKey</span><span class="si">}</span><span class="s">&quot;</span>
                    <span class="nx">currentWords</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">workingKey</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">)</span> <span class="o">or</span> <span class="p">[]).</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span>

                <span class="nx">phrase</span> <span class="o">+=</span> <span class="nx">distributedChar</span>

            <span class="nv">rCleanEnd = </span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s">&quot;[\\\\</span><span class="si">#{</span><span class="nx">LibroIpsum</span><span class="p">.</span><span class="nx">clauseSeparators</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s">&#39;\\\\&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">\\s]*$&quot;</span><span class="p">)</span>
            <span class="nv">phrase = </span><span class="nx">phrase</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">numberOfWords</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rCleanEnd</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;.&#39;</span>

            <span class="nx">phrase</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Generates a random key from the text.
Preference is given to keys which start a sentence, but if no sentence structure is detected, a random substring is generated.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getKey: </span><span class="nf">(length) -&gt;</span>
            <span class="k">return</span> <span class="s">&#39;&#39;</span> <span class="k">if</span> <span class="o">!</span><span class="nx">length</span>

            <span class="nv">concatSentenceEnders = </span><span class="s">&quot;\\\\</span><span class="si">#{</span><span class="nx">LibroIpsum</span><span class="p">.</span><span class="nx">sentenceEnders</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s">&#39;\\\\&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span>
            <span class="nv">rKey = </span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s">&quot;(^[A-Z].{</span><span class="si">#{</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="si">}</span><span class="s">}|[</span><span class="si">#{</span><span class="nx">concatSentenceEnders</span><span class="si">}</span><span class="s">]\\s*[A-Z].{</span><span class="si">#{</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="si">}</span><span class="s">})&quot;</span><span class="p">,</span> <span class="s">&#39;gm&#39;</span><span class="p">);</span>
            <span class="nv">keyMatch = </span><span class="nx">@sourceText</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">rKey</span><span class="p">)</span>

            <span class="k">if</span> <span class="nx">keyMatch</span>
                <span class="nv">rClean = </span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s">&quot;^[</span><span class="si">#{</span><span class="nx">concatSentenceEnders</span><span class="si">}</span><span class="s">]?\\s*(.+)&quot;</span><span class="p">)</span>
                <span class="nv">key = </span><span class="nx">keyMatch</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">keyMatch</span><span class="p">.</span><span class="nx">length</span><span class="p">)].</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rClean</span><span class="p">,</span> <span class="s">&#39;$1&#39;</span><span class="p">)</span>
            <span class="k">else</span>
                <span class="nv">startIndex = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">@sourceText</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">length</span><span class="p">))</span>
                <span class="nv">key = </span><span class="nx">@sourceText</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">length</span><span class="p">)</span>

            <span class="nx">key</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Returns a character based on the character distribution of characters following the specified key</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getDistributedChar: </span><span class="nf">(key) -&gt;</span>
            <span class="k">unless</span> <span class="nx">@frequencyLib</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
                <span class="nv">foundIndex = </span><span class="mi">0</span>
                <span class="k">while</span> <span class="nx">foundIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span>
                    <span class="nv">foundIndex = </span><span class="nx">@sourceText</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">foundIndex</span><span class="p">)</span>
                    <span class="nv">keyMatchEnd = </span><span class="nx">foundIndex</span> <span class="o">+</span> <span class="nx">key</span><span class="p">.</span><span class="nx">length</span>
                    <span class="k">if</span> <span class="nx">foundIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span>
                        <span class="nx">foundIndex</span><span class="o">++</span>
                        <span class="nv">lookAhead = </span><span class="nx">@sourceText</span><span class="p">[</span><span class="nx">keyMatchEnd</span><span class="p">]</span>
                        <span class="k">if</span> <span class="nx">keyMatchEnd</span> <span class="o">&lt;</span> <span class="nx">@sourceText</span><span class="p">.</span><span class="nx">length</span> <span class="o">and</span> <span class="nx">lookAhead</span> <span class="o">not</span> <span class="k">in</span> <span class="nx">LibroIpsum</span><span class="p">.</span><span class="nx">ignoredCharacters</span>
                            <span class="nx">@frequencyLib</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">lookAhead</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">null</span> <span class="k">unless</span> <span class="nx">@frequencyLib</span><span class="p">.</span><span class="nx">getFrequencies</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
            <span class="nx">@frequencyLib</span><span class="p">.</span><span class="nx">randomUniformChoose</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h2>MultiSet</h2>

<p>A set in which members can appear more than once</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">class</span> <span class="nx">MultiSet</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">constructor: </span><span class="nf">(initialItem) -&gt;</span>
            <span class="vi">@cardinality = </span><span class="mi">0</span>
            <span class="vi">@multiSetRep = </span><span class="p">{}</span>

            <span class="nx">@add</span><span class="p">(</span><span class="nx">initialChar</span><span class="p">)</span> <span class="k">if</span> <span class="nx">initialItem</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Returns the number of elements in this multiset (ie its cardinality).
Because multisets can include duplicates, the cardinality may be larger than the number of distinct elements.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getCardinality: </span><span class="nf">-&gt;</span>
            <span class="nx">@cardinality</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Returns the number of occurrences of a given element in the multiset</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getElementCount: </span><span class="nf">(target) -&gt;</span>
            <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">target</span><span class="p">]</span> <span class="o">or</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Returns a set such that every element in the multiset is in the set (but no duplicates exist)</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getElementSet: </span><span class="nf">-&gt;</span>
            <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">@multiSetRep</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Adds a single element to the multiset, increasing cardinality by one</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">add: </span><span class="nf">(item) -&gt;</span>
            <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">unless</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">@multiSetRep</span>
            <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span><span class="o">++</span>

            <span class="nx">@cardinality</span><span class="o">++</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Removes the target, if it is present in the multiset.
Returns true if and only if it changes the multiset.
Note that this method removes only a single instance of the target.
Thus, assuming the target is in the multiset, this method decreases the cardinality of the multiset by one.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">remove: </span><span class="nf">(target) -&gt;</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="k">unless</span> <span class="nx">target</span> <span class="k">of</span> <span class="nx">@multiSetRep</span>

            <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">target</span><span class="p">]</span><span class="o">--</span>
            <span class="k">delete</span> <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">target</span><span class="p">]</span> <span class="k">if</span> <span class="nx">@multiSetRep</span><span class="p">[</span><span class="nx">target</span><span class="p">]</span> <span class="o">is</span> <span class="mi">0</span>

            <span class="nx">@cardinality</span><span class="o">--</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Returns an item chosen randomly based upon the distribution of items of the multiset</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">randomUniformChoose: </span><span class="nf">-&gt;</span>
            <span class="nv">choice = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">@cardinality</span><span class="p">)</span>

            <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">keyCount</span> <span class="k">of</span> <span class="nx">@multiSetRep</span>
                <span class="nx">choice</span> <span class="o">-=</span> <span class="nx">keyCount</span>
                <span class="k">if</span> <span class="nx">choice</span> <span class="o">&lt;</span> <span class="mi">0</span>
                    <span class="k">return</span> <span class="nx">key</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h2>FrequencyLibrary</h2>

<p>Helper class for tracking character distribution following keys, and choosing random character based upon distribution.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">class</span> <span class="nx">FrequencyLibrary</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">constructor: </span><span class="nf">-&gt;</span>
            <span class="vi">@freqLibRep = </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Returns number of keys in the library</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">size: </span><span class="nf">-&gt;</span>
            <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">@freqLibRep</span><span class="p">).</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Returns true if the target book is contained in the library</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">contains: </span><span class="nf">(target) -&gt;</span>
            <span class="nx">target</span> <span class="k">of</span> <span class="nx">@freqLibRep</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Returns a MultiSet for the specified key in the library</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">getFrequencies: </span><span class="nf">(target) -&gt;</span>
            <span class="k">return</span> <span class="nx">@freqLibRep</span><span class="p">[</span><span class="nx">target</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Modifies the character occurrences associated with name to include one more occurrence of element</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">add: </span><span class="nf">(name, element) -&gt;</span>
            <span class="nv">ms = </span><span class="nx">@getFrequencies</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>

            <span class="k">unless</span> <span class="nx">ms</span><span class="o">?</span>
                <span class="nv">ms = </span><span class="nx">@freqLibRep</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MultiSet</span>

            <span class="nx">ms</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Modifies the character occurrences associated with name to include one less occurrence of element.
If this removal results in no elements being associated with name, name is removed from the library.
Returns true if and only if removal was successful.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">remove: </span><span class="nf">(name, element) -&gt;</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="k">unless</span> <span class="nx">@contains</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>

            <span class="nv">ms = </span><span class="nx">@getFrequencies</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>

            <span class="nv">cardBefore = </span><span class="nx">ms</span><span class="p">.</span><span class="nx">getCardinality</span><span class="p">()</span>
            <span class="nx">ms</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span>
            <span class="nv">cardAfter = </span><span class="nx">ms</span><span class="p">.</span><span class="nx">getCardinality</span><span class="p">()</span>

            <span class="nx">freqLibRep</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="k">if</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">getCardinality</span><span class="p">()</span> <span class="o">is</span> <span class="mi">0</span>

            <span class="nx">cardBefore</span> <span class="o">-</span> <span class="nx">cardAfter</span> <span class="o">is</span> <span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Returns a random character, chosen from the same distribution as the characters appear in the text.
For example, if 15% of the characters following "the" are 'i', then this method should return an 'i' 15% of the time.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">randomUniformChoose: </span><span class="nf">(name) -&gt;</span>
            <span class="nv">ms = </span><span class="nx">@getFrequencies</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span> <span class="k">unless</span> <span class="nx">ms</span><span class="o">?</span>
            <span class="nx">ms</span><span class="p">.</span><span class="nx">randomUniformChoose</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Object.keys polyfill (ES5)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span> <span class="o">?=</span> <span class="nf">(obj) -&gt;</span>
        <span class="nx">key</span> <span class="k">for</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">obj</span> <span class="k">when</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <h2>Expose LibroIpsum</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Add to global object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nv">LibroIpsum = </span><span class="nx">LibroIpsum</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Expose to Node.js</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">module.exports = </span><span class="nx">LibroIpsum</span> <span class="k">if</span> <span class="nx">module</span><span class="o">?</span><span class="p">.</span><span class="nx">exports</span><span class="o">?</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Define with RequireJS</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="k">typeof</span> <span class="nx">define</span> <span class="o">is</span> <span class="s">&#39;function&#39;</span> <span class="o">and</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="o">?</span>
        <span class="nx">define</span> <span class="s">&#39;LibroIpsum&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">LibroIpsum</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 