/*! libroipsum 0.1.2 | (c) 2013 Andrew Duthie <andrew@andrewduthie.com> | MIT License */
(function(){var t=[].slice,e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};(function(){var n,i,r,o;return i=function(){function i(t){this.sourceText=t,this.frequencyLib=new n}return i.ignoredCharacters=['"',"`","‘","’","“","”","[","]","(",")","{","}","«","»","\r","\n"],i.sentenceEnders=[".","!","?"],i.clauseSeparators=t.call(i.sentenceEnders).concat([","],[";"]),i.prototype.generate=function(t,e){var n,r,o,s,u;if(null==e&&(e=6),!(t>0))return"";for(u=this.getKey(e),n=(u.match(/\s/g)||[]).length+1,o=u;t>=n;)r=this.getDistributedChar(u),null!=r?(u+=r,u=u.slice(1),/\s/.test(r)&&n++):(o=o.replace(/\s+$/,""),u=this.getKey(e),r=" "+u,n+=(u.match(/\s/g)||[]).length+1),o+=r;return s=RegExp("[\\\\"+i.clauseSeparators.join("\\\\")+"\\s]*$"),o=o.split(" ").slice(0,t).join(" ").replace(s,"")+"."},i.prototype.getKey=function(t){var e,n,r,o,s,u;return t?(e="\\\\"+i.sentenceEnders.join("\\\\"),s=RegExp("(^[A-Z].{"+(t-1)+"}|["+e+"]\\s*[A-Z].{"+(t-1)+"})","gm"),r=this.sourceText.match(s),r?(o=RegExp("^["+e+"]?\\s*(.+)"),n=r[Math.floor(Math.random()*r.length)].replace(o,"$1")):(u=Math.floor(Math.random()*(this.sourceText.length-t)),n=this.sourceText.substring(u,u+t)),n):""},i.prototype.getDistributedChar=function(t){var n,r,o;if(!this.frequencyLib.contains(t))for(n=0;n>=0;)n=this.sourceText.indexOf(t,n),r=n+t.length,n>=0&&(n++,o=this.sourceText[r],this.sourceText.length>r&&0>e.call(i.ignoredCharacters,o)&&this.frequencyLib.add(t,o));return this.frequencyLib.getFrequencies(t)?this.frequencyLib.randomUniformChoose(t):null},i}(),r=function(){function t(t){this.cardinality=0,this.multiSetRep={},t&&this.add(initialChar)}return t.prototype.getCardinality=function(){return this.cardinality},t.prototype.getElementCount=function(t){return this.multiSetRep[t]||0},t.prototype.getElementSet=function(){return Object.keys(this.multiSetRep)},t.prototype.add=function(t){return t in this.multiSetRep||(this.multiSetRep[t]=0),this.multiSetRep[t]++,this.cardinality++},t.prototype.remove=function(t){return t in this.multiSetRep?(this.multiSetRep[t]--,0===this.multiSetRep[t]&&delete this.multiSetRep[t],this.cardinality--):!1},t.prototype.randomUniformChoose=function(){var t,e,n,i;t=Math.floor(Math.random()*this.cardinality),i=this.multiSetRep;for(e in i)if(n=i[e],t-=n,0>t)return e},t}(),n=function(){function t(){this.freqLibRep={}}return t.prototype.size=function(){return Object.keys(this.freqLibRep).length},t.prototype.contains=function(t){return t in this.freqLibRep},t.prototype.getFrequencies=function(t){return this.freqLibRep[t]},t.prototype.add=function(t,e){var n;return n=this.getFrequencies(t),null==n&&(n=this.freqLibRep[t]=new r),n.add(e)},t.prototype.remove=function(t,e){var n,i,r;return this.contains(target)?(r=this.getFrequencies(t),i=r.getCardinality(),r.remove(e),n=r.getCardinality(),0===r.getCardinality()&&freqLibRep.remove(t),1===i-n):!1},t.prototype.randomUniformChoose=function(t){var e;return e=this.getFrequencies(t),null==e?0:e.randomUniformChoose()},t}(),null==(o=Object.keys)&&(Object.keys=function(t){var e,n;n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n}),this.LibroIpsum=i,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=i),"function"==typeof define&&null!=define.amd?define("LibroIpsum",function(){return i}):void 0})()}).call(this);